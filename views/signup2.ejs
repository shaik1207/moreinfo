<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Exo:wght@100;200;300;400;500;600;700;800;900&display=swap');

        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        body {
            height: 100vh;
            background-color: #f1eee9;
            display: flex;
        }
        .container {
            width: 500px;
            height: 500px;
            margin: auto;
            border-radius: 5px;
            border: 1px solid #ced4da;
            font-family: Exo;
            background-color: #fff;
            display: flex;
            flex-direction: column;
            padding: 10px;
            position: relative;
            overflow: hidden;
        }
        .heading {
            padding: 20px;
            font-weight: 900;
            text-align: center;
            font-size: 2em;
            color: orange;
        }
        .steps-container {
            position: relative;
            display: flex;
            height: 50px;
            margin: 10px;
            width: calc(100% - 20px);
        }
        .steps-container > hr {
            width: 100%;
            height: 5px;
            background-color: white;
            border-radius: 20px;
            margin-top: 25px;
            position: absolute;
            z-index: 0;
            border: none;
        }
        .steps-container > .active {
            background: orange;
            width: 0%;
        }
        .steps-container > .steps {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: #f8f9fa;
            color: #f9d678;
            font-size: 1.4em;
            display: flex;
            border: 5px solid #f9d678;
            margin: auto;
            position: relative;
            box-sizing: content-box;
            z-index: 1;
            overflow: hidden;
        }
        .steps-container > .steps::after {
            content: '';
            position: absolute;
            width: 0%;
            height: 45px;
            background-color: orange;
            border-radius: 50%;
            z-index: 2;
        }
        .steps-container > .steps > i {
            margin: auto;
            z-index: 3;
        }
        .input-slide-contianer {
            width: 100%;
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        .scroller {
            width: fit-content;
            display: flex;
            margin-left: 0px;
            transition-duration: 0.5s;
        }
        .input-slide-contianer > .scroller > .input-slide {
            width: 478px;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }
        .input-slide > h3 {
            text-align: center;
        }
        .input-slide > .rules {
            list-style-type: disc;
            display: flex;
            flex-direction: column;
            margin: auto;
            padding-left: 20px;
        }
        .input-slide > .rules > li {
            padding: 5px 0;
            color: #000;
        }
        .input-slide input {
            width: calc(100% - 20px);
            padding: 10px;
            background-color: #f9d678;
            outline: none;
            border-radius: 10px;
            border: none;
            margin: auto 10px;
            font-size: 1.01em;
            color: white;
            box-sizing: border-box;
            transition-duration: 0.3s;
            position: relative;
        }
        .input-slide input::placeholder {
            color: white !important;
            font-size: 1.01em;
        }
        .input-slide input:focus {
            border: 1px solid lime;
        }
        .button-nex {
            padding: 8px 20px;
            border-radius: 20px;
            color: rgb(244, 236, 236);
            font-weight: 800;
            outline: none;
            border: none;
            margin: auto;
            margin-right: 10px;
            font-family: Exo;
            font-size: 1em;
            cursor: pointer;
            background-color: #f9d678;
        }
        .button-nex:hover {
            background-color: orange;
        }
        .button-nex:disabled {
            background-color: #ced4da;
            cursor: not-allowed;
        }
        .fullname {
            display: flex;
        }
        .user-detail > input {
            align-items: start;
            margin: 10px;
        }
        .user-detail > button {
            margin: 10px;
            margin-left: auto;
        }
        .user-detail > .email {
            width: calc(100% - 20px);
        }
        .input-slide p {
            font-size: 0.8em;
            text-align: center;
        }
        .finish-slide {
            line-height: 1.4em;
        }
        :root {
            --BarStartWidth: 0%;
            --BarEndWidth: calc(var(--BarStartWidth) + 25%);
        }
        .animateStep {
            width: var(--BarEndWidth);
            background-color: black;
            animation: ZerotoHeroWidth 0.5s ease;
        }
        .PassedStep::after {
            width: 100% !important;
            transition: 1s;
        }
        .GoBack {
            width: fit-content;
            padding: 0px 10px;
            font-size: 1.5em;
            font-weight: 900;
            position: absolute;
            border-radius: 5px;
            background-color: transparent;
            border: none;
            color: black;
            cursor: pointer;
            left: -50px;
        }
        .GoBack:hover {
            background-color: #f9d678;
        }
        @keyframes ZerotoHeroWidth {
            0% {
                width: 0%;
            }
            100% {
                width: 100%;
            }
        }
        @keyframes GoBackBtnVisible {
            0% {
                left: -50px;
            }
            100% {
                left: 10px;
            }
        }
        @keyframes GoBackBtnInvisible {
            0% {
                left: 10px;
            }
            100% {
                left: -50px;
            }
        }
    </style>
</head>
<body>
    <form class="container" action="/signupsubmit" method="post">
        <h2 class="heading">Sign Up</h2>
        <div class="steps-container">
            <hr>
            <hr class="active">
            <div class="steps"><i class="fa-solid fa-user"></i></div>
            <div class="steps"><i class="fa-solid fa-envelope"></i></div>
            <div class="steps"><i class="fa-solid fa-key"></i></div>
            <div class="steps"><i class="fa-solid fa-trophy"></i></div>
        </div>
        
        <div class="input-slide-contianer">
            <div class="scroller">
                <div class="input-slide">
                    <h3>User Name</h3>
                    <p><i>Username is your online identity</i></p>
                    <ul class="rules">
                        <li>Your username should only contain letters, numbers, underscores or hyphens.</li>
                        <li>No spaces or special characters allowed.</li>
                        <li>Your username should not be offensive or contain profanity.</li>
                    </ul>
                    <input type="text" placeholder="Type your username Here" name="username" class="username">
                    <div class="fullname">
                        <input type="text" placeholder="First Name" name="firstname">
                        <input type="text" name="lastname" class="lastname" placeholder="Last Name">
                    </div>
                    <button class="button-nex" onclick="NextSlide(1, event)" disabled>Next</button>
                </div>
                <div class="input-slide user-detail">
                    <h3>Email</h3>
                    <p><i>Email is the gateway to your digital life</i></p>
                    <ul class="rules">
                        <li>Please enter valid email in the format "example@example.com".</li>
                        <li>We value your privacy and will never use your email for any unauthorized purposes.</li>
                        <li>Please don't use email that belong to someone else.</li>
                        <li>Please don't use email that includes personal information.</li>
                    </ul>
                    <input type="email" name="email" class="email" placeholder="Email">
                    <button class="button-nex" onclick="NextSlide(2, event)" disabled>Next</button>
                </div>
                <div class="input-slide">
                    <h3>Password</h3>
                    <p><i>Your password keeps your account secure</i></p>
                    <ul class="rules">
                        <li>Your password should be at least 8 characters long.</li>
                        <li>Include a combination of letters, numbers, and special characters.</li>
                        <li>Avoid using easily guessable information like your name or birthdate.</li>
                        <li>Do not share your password with anyone.</li>
                    </ul>
                    <input type="password" name="password" class="password" placeholder="Password">
                    <button class="button-nex" onclick="NextSlide(3, event)" disabled>Next</button>
                </div>
                <div class="input-slide finish-slide">
                    <h3>Congratulations!</h3>
                    <p>You have successfully completed the sign-up process.</p>
                    <p>Press 'Submit' to create your account.</p>
                    <button typ="submit" class="button-nex">Submit</button>
                </div>
            </div>
        </div>
        <button class="GoBack" style="animation: GoBackBtnInvisible 0.5s forwards; display: none;" onclick="PreviousSlide()">←</button>
    </form>
    
    <script>
        let Step = 0;
        let TotalSteps = 3;

        function NextSlide(StepToGo, event) {
            event.preventDefault();
            if (validateStep(Step)) {
                Step += 1;
                document.querySelector('.scroller').style.marginLeft = `-${StepToGo * 480}px`;

                if (Step === 1) {
                    document.querySelector('.GoBack').style.display = 'block';
                    document.querySelector('.GoBack').style.animation = 'GoBackBtnVisible 0.5s forwards';
                }

                document.querySelector('.active').style.setProperty('--BarStartWidth', `${(Step - 1) * 25}%`);
                document.querySelector('.active').style.setProperty('--BarEndWidth', `${Step * 25}%`);
                document.querySelector('.active').classList.add('animateStep');

                document.querySelectorAll('.steps')[Step - 1].classList.add('PassedStep');

                // Enable next button for the next step
                document.querySelectorAll('.button-nex')[Step].disabled = !validateStep(Step);
            }
        }

        function PreviousSlide() {
            Step -= 1;
            document.querySelector('.scroller').style.marginLeft = `-${Step * 480}px`;

            if (Step === 0) {
                document.querySelector('.GoBack').style.animation = 'GoBackBtnInvisible 0.5s forwards';
                setTimeout(() => {
                    document.querySelector('.GoBack').style.display = 'none';
                }, 500);
            }

            document.querySelector('.active').style.setProperty('--BarStartWidth', `${Step * 25}%`);
            document.querySelector('.active').style.setProperty('--BarEndWidth', `${(Step - 1) * 25}%`);
            document.querySelector('.active').classList.add('animateStep');

            document.querySelectorAll('.steps')[Step].classList.remove('PassedStep');

            // Enable next button for the current step
            document.querySelectorAll('.button-nex')[Step].disabled = !validateStep(Step);
        }

        function validateStep(step) {
            let isValid = false;
            switch(step) {
                case 0:
                    const username = document.querySelector('.username').value.trim();
                    const firstName = document.querySelector('input[name="firstname"]').value.trim();
                    const lastName = document.querySelector('.lastname').value.trim();
                    isValid = /^[a-zA-Z0-9_-]+$/.test(username) && username.length > 0 && firstName.length > 0 && lastName.length > 0;
                    break;
                case 1:
                    const email = document.querySelector('.email').value.trim();
                    isValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
                    break;
                case 2:
                    const password = document.querySelector('.password').value.trim();
                    isValid = password.length >= 8 && /[a-zA-Z]/.test(password) && /[0-9]/.test(password) && /[^a-zA-Z0-9]/.test(password);
                    break;
                default:
                    isValid = true;
            }
            return isValid;
        }

        document.querySelectorAll('.input-slide input').forEach(input => {
            input.addEventListener('input', (event) => {
                document.querySelectorAll('.button-nex')[Step].disabled = !validateStep(Step);
            });

            input.addEventListener('keypress', (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    document.querySelectorAll('.button-nex')[Step].click();
                }
            });
        });
    </script>
</body>
</html>
